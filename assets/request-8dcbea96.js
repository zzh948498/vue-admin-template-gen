import{f as s}from"./el-row-3321aabf.js";import{a}from"./el-tooltip-a900fd7e.js";import{v as r}from"./index-e4f9590d.js";import{j as o}from"./el-select-bbb2ffe6.js";const g=e=>s.confirm(e,"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),n=a.create({baseURL:"/prod-api",timeout:2e4});n.interceptors.request.use(e=>(r().userToken&&e.headers,e),e=>(console.log(e),Promise.reject(e)));n.interceptors.response.use(e=>{const t=e.data;return t.code!==200||t.code===200&&t.status!==0?(o({message:t.message||"Error",type:"error",duration:5*1e3}),Promise.reject(new Error(t.message||"Error"))):e},e=>{var t;return((t=e==null?void 0:e.response)==null?void 0:t.status)===401&&s.confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then(()=>{r().resetToken().then(()=>{location.reload()})}),console.log("err"+e),o({message:e.message,type:"error",duration:5*1e3}),Promise.reject(e)});export{g as E,n as s};
